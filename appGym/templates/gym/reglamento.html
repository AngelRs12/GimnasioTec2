{% extends 'gym/base.html' %}
{% load static %}
{% block title %}Reglamento del Gimnasio{% endblock %}

{% block content %}

<link rel="stylesheet" href="{% static 'styles/reglamento.css' %}" />
<div class="container mt-5">
  <div class="card reglamento-card shadow-lg">
    <div class="card-header reglamento-header text-center">
      <h3 class="mb-0">Reglamento del Gimnasio del ITCJ</h3>
      <p class="mt-2 reglamento-subtitle">Normas y disposiciones para el uso responsable y seguro de las instalaciones.</p>
    </div>

    <div class="card-body p-4">
      <div class="text-center mb-4">
        <h4 class="mt-2 fw-bold">Lea atentamente las siguientes reglas</h4>
        <p class="text-muted fs-5">El cumplimiento de estas normas garantiza un ambiente ordenado, seguro y respetuoso para todos los usuarios.</p>
      </div>
{% if request.session.usuario_admin %}
<div class="d-flex justify-content mb-4">
  <button
    class="btn btn-success"
    data-bs-toggle="modal"
    data-bs-target="#modalAgregarSeccion"
  >
    + Agregar Seccion
  </button>
</div>
{% endif %}
      <!-- Cuadrícula 3x2 -->
      <div class="row g-4 reglamento-grid">

  {% for regla in reglas %}
  <div class="col-md-4">
    <div class="card h-100 shadow-sm border-0">
      <div class="card-body">

        <h5 class="section-title">{{ regla.tipo }}</h5>
        <p class="text-muted">{{ regla.descripcion }}</p>

        <ul class="reglamento-list">
          {% for item in regla.items %}
            <li>{{ item }}</li>
          {% endfor %}
        </ul>

        {% if request.session.usuario_admin %}
        <div class="mt-3 text-end">
          <a>
            Editar
          </a>
        </div>
        {% endif %}

      </div>
    </div>
  </div>
  {% endfor %}

</div>


      </div> <!-- row -->
              <div class="col-12">
          <div class="card disposicion-card border-0 shadow-sm mt-2">
            <div class="card-body text-center">
              <h5 class="fw-bold text-dark mb-3">Disposición final</h5>
              <p class="text-muted mb-2">Cualquier situación no prevista en este reglamento será resuelta por el Departamento de Actividades Extraescolares.</p>
              <p class="text-muted">El cumplimiento de estas normas contribuye a un ambiente seguro, ordenado y respetuoso para todos los usuarios del gimnasio.</p>
              <div class="mt-3">
                <a href="{% url 'index' %}" class="btn btn-back">Volver al inicio</a>
              </div>
            </div>
          </div>
        </div>
    </div> <!-- card-body -->
  </div> <!-- card -->
</div> <!-- container -->
<div class="modal fade" id="modalAgregarSeccion" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Agregar regla del reglamento</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <form method="POST" action="{% url 'agregar_seccion' %}">
        {% csrf_token %}
        <div class="modal-body">

          <div class="mb-3">
            <label class="form-label">Sección</label>
            <input
              type="text"
              name="tipo"
              class="form-control"
              placeholder="Título de la sección"
              required
            />
          </div>

          <div class="mb-3">
            <label class="form-label">Descripción de la sección</label>
            <textarea
              name="descripcion"
              class="form-control"
              rows="3"
              required
              style = "resize:none"
            ></textarea>
          </div>

        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            Cancelar
          </button>
          <button type="submit" class="btn btn-success">
            Guardar
          </button>
        </div>
      </form>

    </div>
  </div>
</div>

{% endblock %}
